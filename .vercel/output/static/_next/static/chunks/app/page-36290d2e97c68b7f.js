(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5867:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var r=t(5155),l=t(2115);function s(e){let{onUpload:a}=e,t=(0,l.useRef)(null),[s,o]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{{let e=setInterval(()=>{let r=window.cloudinary;r&&!t.current&&(t.current=r.createUploadWidget({cloudName:"dskwsp31z",uploadPreset:"ml_default",multiple:!0,folder:"svatba",resourceType:"auto"},(e,t)=>{e||(null==t?void 0:t.event)!=="success"||a()}),o(!0),clearInterval(e))},500);return()=>clearInterval(e)}},[a]),(0,r.jsx)("div",{className:"text-center my-6",children:s?(0,r.jsx)("button",{onClick:()=>{var e;return null==(e=t.current)?void 0:e.open()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"\uD83D\uDCE4 Nahr\xe1t fotky nebo video"}):(0,r.jsx)("p",{className:"text-gray-500",children:"Nač\xedt\xe1m n\xe1stroj pro nahr\xe1v\xe1n\xed…"})})}var o=t(5647);let n="https://rlupihuiukrjskvxypdc.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsdXBpaHVpdWtyanNrdnh5cGRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MDY3NDAsImV4cCI6MjA2Nzk4Mjc0MH0.rPpJNba5TAm553bpaEMor0hmhrj8wnDv8siUV7h7IOY";if(!n||!c)throw Error("Supabase URL nebo ANON kl\xedč chyb\xed. Zkontroluj .env.local soubor.");let i=(0,o.UU)(n,c);function u(){let[e,a]=(0,l.useState)([]),[t,o]=(0,l.useState)(!0),n=async()=>{o(!0);let{data:e,error:t}=await i.from("photos").select("*").order("id",{ascending:!1});t?console.error("Chyba při nač\xedt\xe1n\xed:",t.message):a(e||[]),o(!1)},c=async e=>{confirm("Opravdu chceš smazat tento soubor?")&&((await fetch("/api/upload?public_id=".concat(e),{method:"DELETE"})).ok?a(a=>a.filter(a=>a.public_id!==e)):alert("Smaz\xe1n\xed selhalo."))};return(0,l.useEffect)(()=>{n()},[]),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"\uD83D\uDCF8 Naše svatebn\xed galerie"}),(0,r.jsx)(s,{onUpload:n}),t?(0,r.jsx)("p",{className:"text-center text-gray-500",children:"Nač\xedt\xe1m fotky a videa..."}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:e.map(e=>e.url?(0,r.jsxs)("div",{className:"relative group border rounded-xl overflow-hidden shadow-sm",children:["video"===e.type?(0,r.jsx)("video",{src:e.url,controls:!0,className:"w-full h-auto bg-black max-h-96",preload:"metadata",children:"V\xe1š prohl\xedžeč nepodporuje přehr\xe1v\xe1n\xed videa."}):(0,r.jsx)("img",{src:e.url,alt:"Nahran\xe1 fotka",className:"w-full h-auto object-cover",loading:"lazy"}),(0,r.jsx)("button",{onClick:()=>c(e.public_id),className:"absolute top-2 right-2 bg-white bg-opacity-80 hover:bg-red-500 hover:text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition",children:"Smazat"})]},e.id):null)})]})}},8042:(e,a,t)=>{Promise.resolve().then(t.bind(t,5867))}},e=>{var a=a=>e(e.s=a);e.O(0,[647,441,684,358],()=>a(8042)),_N_E=e.O()}]);